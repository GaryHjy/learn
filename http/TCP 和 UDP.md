# TCP 和 UDP

**TCP和UDP是运输层的两种协议**

运输层（Transport Layer）就是负责向两台逐级进程之间的通信提供的数据传输服务，应用进程利用该服务传送应用层报文。“通用的”是指并不针对某一个特定的网络应用，而是多种应用可以使用同一个运输层服务。

- TCP

传输控制协议 TCP（Transmisson Control Protocol）是一种**面向连接的、可靠的**数据传输服务。

面向连接：就像我们打电话一样，通过拿起电话和挂掉电话来表示连接的建立和中断。

```
特点：
  1. TCP 提供全双工通信，也就是说双方在连接建立之后，都可以在任务时候进行数据发送
  2. TCP 两端连接都设有缓存，在发送和接收时都可以利用缓存临时存放数据 
  3. TCP 是面向字节流的
```


- UDP

用户数据协议 UDP（User Datagram Protocol）是一种**无连接的、不保证数据传输的可靠性**的运输层协议。

```
特点：
  1. UDP 无连接
  2. UDP 不保证可靠性，因此不需要维持复杂的链接状态
  3. UDP 是面向报文
  4. UDP 没有拥塞控制
  5. UDP 支持一对一、一对多、多对一和多对多的交互通信
```

**疑问：TCP与UDP对于直播、实时视频会议，哪个协议更加合适？**

因为UDP传输速度更快、效率更高，UDP没有拥塞控制，所以网络出现拥塞不会使原主机的发送速率降低，且直播、实时视频会议丢失一两帧内容对于应用并没有体验性的影响，因此，UDP对于直播、实时视频会议的场景会更加适合。

**TCP 如何保证传输的可靠性**

```
  1. 数据包校验：如果接收端校验出包有错，则进行丢弃且不进行响应。
  2. 对失序数据包重排序：TCP协议会对失序数据包进行排序，然后交给应用层。
  3. 丢弃重复数据
  4. 应答机制：当接收到数据之后，将发送确认信息
  5. 超时重发：当发送端发出数据后，它启动一个定时器，如果超出计时器时限，将重发这个报文段。
  6. 流量控制：TCP连接的每一方都有固定大小的缓冲空间，可防止接收端缓冲区溢出，这就是流量控制。TCP使用可变大小的滑动窗口协议来进行流量控制
```
